<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Species gallery - The Melissodes Project</title>
  <meta name="description" content="Image gallery of Melissodes species">

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="favicon.png">
  <link rel="canonical" href="https://themelissodesproject.wildref.org/gallery-img.html">

  <meta name="application-name" content="The Melissodes Project">
  <meta property="og:site_name" content="The Melissodes Project">
  <meta property="og:title" content="Species gallery - The Melissodes Project">
  <meta property="og:description" content="Image gallery of Melissodes species">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://themelissodesproject.wildref.org/gallery-img.html">
  <meta property="og:image" content="https://themelissodesproject.wildref.org/favicon.png">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Species gallery - The Melissodes Project">
  <meta name="twitter:description" content="Image gallery of Melissodes species">
  <meta name="twitter:image" content="https://themelissodesproject.wildref.org/favicon.png">

  <meta name="google-site-verification" content="3FBTvb3eNfQYUXbZzn4Q-1-6W1FJwJLzKFdkYJOHirM" />

  <style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');

  *{
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Roboto", sans-serif;
  }

  body {
        font-family: Georgia, serif;
        margin: 0;
        padding: 0;
        line-height: 1.6;
        color: #222;
        background-color: rgb(251, 251, 250);
      }

  .container {
    max-width: 920px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .heading {
    margin: 0 auto;
  }

  .bar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 40px 0 20px;
    margin-bottom: 10px;
    flex-wrap: wrap;
    gap: 10px;
  }

  .heading header{
    padding: 20px;
    background-color: white;
    border-style: solid;
    border-color: #F3F4F5;
    border-width: 1.5px;
  }

  .heading header h1 {
    font-size: 1.63rem;
    margin: 0;
    flex: 1 1 auto;
  }

  nav {
    flex: 0 0 auto;
  }

  nav ul {
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin: 0;
    padding: 0;
  }

  nav a {
    text-decoration: none;
    color: #000;
    font-size: 0.95rem;
  }

  .page{
    background-color: white;
    border-style: solid;
    border-color: #F3F4F5;
    border-width: 1.5px;
  }


  .search-filter {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    margin: 1rem;
  }

  .search-filter input[type="text"] {
    width: 100%;
    padding: 12px 16px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
    box-sizing: border-box; /* ✅ prevents overflow */
    }
    
  .filters {
    text-align: left;
      margin: 10px auto;
      padding: 12px 16px;
      background: rgb(251, 251, 250);
      border-style: solid;
      border-color: #F3F4F5;
      border-width: 1.5px;
      font-size: 0.95rem;
      width: 100%;
    }
    
    

    .filters label {
    gap: 6px; 
    cursor: pointer;
    padding-left: 6px;
}

  .gallery-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.5rem;
    padding: 1.5rem;
  }

  .gallery-card {
    width: 220px;
    aspect-ratio: auto;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: transform 0.2s ease;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
  }

  .gallery-card:hover {
    transform: scale(1.03);
  }

  .gallery-card img {
    width: 100%;
    height: 65%;
    object-fit: cover;
    display: block;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  }

  .gallery-card .caption {
    flex: 1;
    padding: 0.75rem;
    text-align: center;
    font-size: 0.95rem;
    color: #333;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .overlay-content {
    background: #fff;
    border-radius: 8px;
    max-width: 40%;
    max-height: 80%;
    padding: 1rem;
    text-align: center;
    overflow: auto;
  }

  .overlay-content img {
    max-width: 100%;
    max-height: 400px;
    object-fit: contain;
    margin-bottom: 1rem;
    border-radius: 5px;
  }

  .close-btn {
    background: #333;
    color: #fff;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 1rem;
  }

  @media only screen and (max-width: 1000px) {
    .gallery-card {
      width: 45%;
      max-width: 220px;
    }
    .gallery-card .caption {
      font-size: 13px;
    }
  }

  @media only screen and (max-width: 1000px ){
    .bar-header {
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .bar-header header h1 {
      text-align: center;
      width: 100%;
    }
    nav ul {
      flex-wrap: wrap;
      justify-content: flex-start;
    }
  }

  @media (max-width: 600px) {
  .filters {
    display: grid;                 /* switch to grid layout */
    grid-template-columns: repeat(2, 1fr); /* 2 items per row */
    gap: 6px 15px;                /* vertical 10px, horizontal 15px */
  }

    .filters label {
    gap: 6px; 
    cursor: pointer;
    margin-left: -10px;
    font-size: 13px;
}
}
  </style>
</head>
<body>
  <div class="container">
    <div class="heading">
      <header class="bar-header">
        <h1>The Melissodes Project</h1>
        <nav>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="species-index.html">Species Index</a></li>
            <li><a href="gallery-menu.html">Gallery</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </nav>
      </header>
    </div>
    <div class="page">
      <header class="page-header">
        <div class="search-filter">
          <input type="text" id="search" placeholder="Search diagram gallery..." />
        </div>
      </header>

      <main>
        <div class="gallery-grid" id="gallery">

          <div class="gallery-card" 
              data-caption="Melissodes Leg Diagram" 
              data-overlay="Diagram showing the sexual diamorphism in leg structre of the genus Melissodes (Frank Hogland 2025)" 
              data-subgenus="">
            <img src="img/Melissodes MvF Leg Diagram.png" alt="Eumelissodes"/>
            <div class="caption">Melissodes Leg Diagram</div>
          </div>

          <div class="gallery-card" 
              data-caption="Melissodes Wing Diagram" 
              data-overlay="Diagram showing the wing structure of the genus Melissodes (Frank Hogland 2025)" 
              data-subgenus="">
            <img src="img/Wing Diagram.webp" alt="Melissodes Wing Diagram"/>
            <div class="caption">Melissodes Wing Diagram</div>
          </div>

          <div class="gallery-card" 
              data-caption="Melissodes Antennae Diagram" 
              data-overlay="Diagram showing the sexual diamorphism in antennal structre of the genus Melissodes. Antennae lengths vary between species. (Frank Hogland 2025)" 
              data-subgenus="">
            <img src="img/Melissodes MvF Antennae Diagram.png" alt="Melissodes Antennae Diagram"/>
            <div class="caption">Melissodes Antennae Diagram</div>
          </div>

          <div class="gallery-card" 
              data-caption="Melissodes Subgenera Phylogeny Diagram" 
              data-overlay="Diagram representing the phylogenetic relationship between Melissodes subgenera taken from Laberge (1956). Originally presented as “FIG. 1. Diagrammatic representation of the relationships of the subgenera of Melissodes Latreille. The area of each circle indicates the approximate number of species in each subgenus, Psilomelissodes being unity. The distances between the perimeters of adjacent circles represent degree of relationship. The subgenera Epimelissodes, Idiomelissodes and Brachymelissodes form a distinct group and are not closely related to any one of the remaining subgenera.”" 
              data-subgenus="Apomelissodes">
            <img src="img/Laberge, 1956 circle diagram.png" alt="Melissodes dagosus"/>
            <div class="caption">Melissodes Subgenera Phylogeny Diagram</div>
          </div>
        </div>
      </main>

      <div class="overlay" id="overlay">
        <div class="overlay-content">
          <img id="overlay-img" src="" alt=""/>
          <p id="overlay-caption"></p>
          <button class="close-btn" onclick="closeOverlay()">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const searchInput = document.getElementById('search');
    const checkboxes = document.querySelectorAll('.subgenus-checkbox');
    const cards = document.querySelectorAll('.gallery-card');
    const overlay = document.getElementById('overlay');
    const overlayImg = document.getElementById('overlay-img');
    const overlayCaption = document.getElementById('overlay-caption');
    const gallery = document.getElementById('gallery');

    // ✅ Sorting function
    function sortGallery() {
      const cardsArray = Array.from(cards);

      cardsArray.sort((a, b) => {
        const nameA = a.dataset.caption.toLowerCase();
        const nameB = b.dataset.caption.toLowerCase();
        return nameA.localeCompare(nameB);
      });

      cardsArray.forEach(card => gallery.appendChild(card));
    }

    function filterGallery() {
      const query = searchInput.value.toLowerCase();
      const activeSubgenera = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.value.toLowerCase());

      cards.forEach(card => {
        const caption = card.dataset.caption.toLowerCase();
        const subgenus = card.dataset.subgenus.toLowerCase();
        const matchesSearch = caption.includes(query);
        const matchesSubgenus = activeSubgenera.length === 0 || activeSubgenera.includes(subgenus);

        if (matchesSearch && matchesSubgenus) {
          card.style.display = 'flex';
        } else {
          card.style.display = 'none';
        }
      });

      // ✅ Keep alphabetical order after filtering
      sortGallery();
    }

    searchInput.addEventListener('input', filterGallery);
    checkboxes.forEach(cb => cb.addEventListener('change', filterGallery));

    // Overlay modal logic
    cards.forEach(card => {
      card.addEventListener('click', () => {
        overlayImg.src = card.querySelector('img').src;
        overlayCaption.textContent = card.dataset.overlay;
        overlay.style.display = 'flex';
      });
    });

    function closeOverlay() {
      overlay.style.display = 'none';
    }

    overlay.addEventListener('click', e => {
      if(e.target === overlay) closeOverlay();
    });

    // ✅ Sort once on page load
    sortGallery();
  </script>
</body>
</html>